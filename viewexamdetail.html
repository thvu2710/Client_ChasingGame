<!-- Copyright (c) 2012 Mobile Developer Solutions -->
<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-type" name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width">
	<title>MDS PhoneGap API Demo with jQuery Mobile</title>

	<link rel="stylesheet" href="jquery.mobile-1.4.2.min.css">
	<!-- css files -->
	<link rel="stylesheet" href="index.css">
	<link rel="stylesheet" href="info.css">
	<link rel="stylesheet" href="home.css">
	<link rel="stylesheet" href="countdown_timer.css">
	
	<script src="jquery-1.10.2.min.js"></script>
	<script src="jquery.mobile-1.4.2.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>
	<style type=text/css>
		/* style for text */
		.text {
			color: #000000;
			text-shadow: 0px -1px 1px rgba(0, 0, 0, 0.7);
			padding: 13px 20px;
			font-size: 19px;
			margin: 0px auto;
			text-align: center;
		}
	</style>
</head>
<body>
<div data-role=page id=info data-add-back-btn=true>
	<div data-role=header  data-add-back-btn=true>
		<h1>Mistake Chasing Game</h1>
	</div>
	<div data-role=content>
		<p class="text">GAME HISTORY</p>
		<div class="horizontalRule">
		</div>
		<div style="margin: 0 auto; text-align: center">
			<table>
				<tr>
					<td class="text">STT</td>
					<td class="text">Question</td>
					<td class="text">Your answer</td>
				</tr>
			</table>
		</div>
	</div>
	<div data-role=footer  data-position="fixed">
		<h1>Mistake Chasing Game (c) 2013</h1>
	</div>
	
	<script>
		function parse(val) {
			var result = "Not found",
				tmp = [];
			location.search
			//.replace ( "?", "" ) 
			// this is better, there might be a question mark inside
			.substr(1)
				.split("&")
				.forEach(function (item) {
				tmp = item.split("=");
				if (tmp[0] === val) result = decodeURIComponent(tmp[1]);
			});
			return result;
		}
	
		var user_info = {
			email:sessionStorage.getItem("email"),
			timestamp:parse('timestamp')
		};
		$.ajax({
		     url:"http://localhost:8080/FirstRestWS/rest/webservice/viewExam",
		     dataType: 'jsonp',
		     data: user_info,
		     success: function(json){
				var question_list = json.parameters[0];
				var answered_list = json.parameters[1];
				 for (var i = 0; i < question_list.length; i++) {
					$("table").append("<tr><td class='text' style='padding: 13px 10px;font-size: 15px;'>" + (i+1) + "</td><td class='text' style='padding: 13px 10px;font-size: 15px;'>" + question_list[i].question + "</td><td class='text' style='padding: 13px 10px;font-size: 15px;'>" + answered_list[i] + "</td></tr>");
				 }
		     },
		     error:function(){
		         alert("Error");
		     }      
		});
	</script>
</div>
</body>
</html>
