<!-- Copyright (c) 2012 Mobile Developer Solutions -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link href="my_theme.min.css" rel="stylesheet">
    <link href="jquery.mobile.icons.min.css" rel="stylesheet">
    <link href="jquery.mobile.structure-1.4.3.min.css" rel="stylesheet">
    <script src="jquery-1.11.1.min.js"></script>
    <script src="jquery.mobile-1.4.3.min.js"></script>
    <script charset="utf-8" src="cordova-1.5.0.js" type="text/javascript"></script>
    <script charset="utf-8" src="cordova.js" type="text/javascript"></script>
    <script charset="utf-8" src="phonegap.js" type="text/javascript"></script>
    <style type="text/css">
    /* style for text */
        .text {
            color: #000000;
            text-shadow: 0px -1px 1px rgba(0, 0, 0, 0.7);
            padding: 13px 20px;
            font-size: 19px;
            margin: 0px auto;
            text-align: center;
        }
    </style>

    <title></title>
</head>

<body>
    <div data-role="page" id="info">
        <div data-role="header">
            <h1>Multiplayer Game History</h1><a class="ui-btn-left" data-icon="back" data-role="button" href="home.html" rel="external">Back</a>
        </div>

        <div data-role="content">
            <p class="text" style="color: blue;">Game history for multiplayer</p>

            <div class="horizontalRule"></div>

            <div style="margin: 0 auto; text-align: center">
                <table class="ui-responsive table-stroke" data-mode="reflow" data-role="table" id="movie-table">
                    <thead>
                        <tr>
                            <th data-priority="1">STT</th>

                            <th data-priority="2">Time</th>

                            <th data-priority="persist">Result</th>

                            <th data-priority="3">View Registers</th>
                        </tr>
                    </thead>

                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div data-position="fixed" data-role="footer">
            <h1>Mistake Chasing Game (c) 2014</h1>
        </div>
        <script>
        	var user_info = {
        	    email: sessionStorage.getItem("email")
        	};
        	$.ajax({
        	    url: "http://mistakechasinggame-hcmuaf.rhcloud.com/rest/webservice/game_history_multi",
        	    dataType: 'jsonp',
        	    data: user_info,
        	    success: function(json) {
        	        for (var i = 0; i < json.parameters.length; i++) {
        	            var current_item = json.parameters[i];
        	            var date = new Date(current_item.timestamp);
        	            var dateString = (date.getMonth() + 1) + '/' + date.getDate() + '/' + date.getFullYear() + " " + date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds();
        	            $("tbody").append("<tr><th> " + (i + 1) + "</th><td> " + dateString + "</td><td>" + current_item.score + "</td><td><a data-role=button href=# timestamp=" + current_item.timestamp + ">View Detail </a></td></tr>");
        	        }
        	        $("table").table("refresh");
        	        $("td a").bind("click", function() {
        	            sessionStorage.setItem("timestamp", $(this).attr("timestamp"));
        	            window.location = "viewregisterdetail.html";
        	        });
        	    },
        	    error: function() {
        	        alert("Error");
        	    }
        	});
        </script>
    </div>
</body>
</html>
